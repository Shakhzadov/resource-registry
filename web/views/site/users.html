<div ng-if="currentUser.role === 'registrar'" class="community-container">

	<style>
		.community-container li.list-group-item {
			border-bottom: 1px solid #e3e3e3;
		}
		.list-group-item:nth-child(1) {
			font-weight: 700;
		}
		.community-container .list-group-item:last-child {
			border-bottom: 0px solid transparent;
		}
		.list-group-item div > div {
			line-height: 56px;
		}
		.community-container .community-search {
			_width: 100%;
			height: 35px;
			line-height: 35px;
			padding: 0 10px;
			margin: 10px 0;
			border-radius: 5px;
			border: 1px solid #e3e3e3;
		}
	</style>

	<div class="container well">
		<div class="row">
			<div class="col-lg-10">
				<ng-form>
					<span>Пошук користувачів &nbsp</span>
					<input type="text" class="community-search" ng-model="userSearch" ng-enter="searchUser(userSearch)"/>
					<input class="btn btn-primary" type="submit" value="Пошук" ng-click="searchUser(userSearch)"></input>
				</ng-form>
				<a class="btn btn-primary ng-scope" title="Сортувати" ng-click="sortName()">СОРТУВАТИ <span class="glyphicon glyphicon-sort" aria-hidden="true"></span></a>
			</div>
			<div class="col-lg-2">
				<a class="btn btn-material-amber-400 ng-scope" href="#" ng-if="currentUser.role === 'registrar' &amp;&amp; currentUser.isLogined">ДОДАТИ <span class="glyphicon glyphicon-plus" aria-hidden="true"></span></a>
			</div>
			
		</div>
	</div>	
	<div class="container well">
		<div class="row">
			<ul class="list-group">
				<li class="list-group-item">
					<div class="row">
						<div class="col-lg-4">Прізвище та ім'я</div>
						<div class="col-lg-3">Логін</div>
						<div class="col-lg-3">
							<select ng-model="roleFilter" ng-change="filterRole(roleFilter)">
								<option value="">Всі користувачі</option>
				            	<option value="admin">Адміністратор</option>
				            	<option value="registrar">Реєстратор</option>
				            	<option value="user">Користувач</option>
				            	<option value="commissioner">Уповноважений</option>
				            </select>
				        </div>
						<div class="col-lg-2">Дії</div>
					</div>
				</li>
				<li class="list-group-item" ng-repeat="data in list_users.items">
					<div class="row">
						<div class="col-lg-4">{{data.last_name}} {{data.first_name}}</div>
						<div class="col-lg-3">{{data.username}}</div>
						<div class="col-lg-3">
							<select id="user-role-selector" ng-model="changeRoleId" ng-change="changeRole(changeRoleId, data.user_id)">
				        		<option value="{{item.role_id}}" selected hidden>{{data.role_name}}</option>
				        		<option ng-repeat="item in roleFound" value="{{item.role_id}}" ng-hide="data.role_name == item.role_name">{{item.role_name}}</option>
				        	</select>
				        </div>
						<div class="col-lg-2">
							<div class="btn-group">
								<a class="btn btn-primary ng-scope" title="Редагувати" href="#" ng-if="currentUser.role === 'registrar' &amp;&amp; currentUser.isLogined"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
							 	</a>
							 	<a class="btn btn-material-red-400 text-center ng-scope" title="Деактивувати" ng-if="currentUser.role === 'registrar' &amp;&amp; currentUser.isLogined" ng-show="{{data.activated == 1}}" ng-click="changeActivationStatus(0, data.user_id)" id="deact-button-{{$index}}"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                        		</a>
                        		<a class="btn btn-material-grey-500 text-center ng-scope" title="Активувати" ng-if="currentUser.role === 'registrar' &amp;&amp; currentUser.isLogined" ng-show="{{data.activated == 0}}" ng-click="changeActivationStatus(1, data.user_id)"  id="act-button-{{$index}}"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                        		</a>
							</div>
						</div>           	
					</div>
				</li>
			</ul>
			<div class="col-md-8 margin_bottom">          
                <ul class="pagination pagination-sm" ng-if="list_users._meta.pageCount > 1">
                    <li ng-if="list_users._links.first">
                        <a href="" ng-click="setPage(list_users._links.first.href, 'first')">&laquo;</a>
                    </li>
                    <li ng-if="list_users._links.prev">
                        <a href="" ng-click="setPage(list_users._links.prev.href, 'prev')" >‹</a>
                    </li>
                    <li ng-repeat="page in getPages(list_users._meta.pageCount) track by $index"
                        ng-click="switchPage(page)" ng-class="{active: page == currentPage}"
                        ng-if="page">
                        <span>{{page}}</span>
                    </li>
                    <li ng-if="list_users._links.next">
                        <a href="" ng-click="setPage(list_users._links.next.href, 'next')" >›</a>
                    </li>
                    <li ng-if="list_users._links.last">
                        <a href="" ng-click="setPage(list_users._links.last.href, 'last')">&raquo;</a>
                    </li>
                </ul>
           	</div>  
		</div>
	</div>
</div>
